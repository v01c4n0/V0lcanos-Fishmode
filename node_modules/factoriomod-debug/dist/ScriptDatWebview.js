var g=acquireVsCodeApi();function u(s,e){g.postMessage({type:s,body:e})}var l={version:document.getElementById("version"),root:document.getElementById("root")};function c(s,e,t){let a=document.createElement("span");return a.classList.add(s),a.append(e),a.dataset.ref=t,a}function p(s,e){switch(e.type){case"Nil":case"BoolFalse":case"BoolTrue":case"Number":case"String":case"ExistingGCObject":return d(s,e);case"Table":case"TableWithMeta":return c("table",`${e.type} [${e.id}]`);case"LuaObject":return c("luaobject",`${e.value.type} [${e.id}]`)}}var f=["Nil","BoolFalse","BoolTrue","Number","String","ExistingGCObject"];function o(s,e,t){let a=document.createElement("details"),n=document.createElement("summary"),i=p(s,t);return n.append(e,i.cloneNode(!0)),a.append(n),f.includes(t.type)?(a.classList.add("plain"),{plain:i}):(a.append(d(s,t)),{details:a,plain:i})}function y(s,e){let t=document.createElement("details"),a=document.createElement("summary");a.classList.add("keyvalue");let n=o(s,"Key: ",e.key),i=o(s,"Value: ",e.value);if(a.append(n.plain," = ",i.plain),t.append(a),!n.details||!i.details){!n.details&&!i.details&&t.classList.add("plain");let r=n.details??i.details;r&&(r.firstChild?.remove(),r.childNodes.forEach(m=>t.append(m)))}else t.append(n.details,i.details);return t}function b(s,e){let t=document.createElement("div");if(t.id=`${s}_gc_${e.id}`,t.classList.add("fetch"),e.type==="TableWithMeta"){let a=document.createElement("details");a.classList.add("meta");let n=document.createElement("summary"),i=document.createElement("span");i.classList.add("meta"),i.append(e.meta),n.append("Meta: ",i),a.append(n),t.append(a)}return t}function L(s,e,t){let a=document.getElementById(`${s}_gc_${e}`),n=a.closest("details");if(n.classList.remove("loading"),t.length===0)a.querySelector(".meta")||n.classList.add("empty");else for(let i of t)a.append(y(s,i))}function S(s,e){let t=document.createElement("pre");return t.id=`${s}_gc_${e.id}`,t.classList.add("luaobject"),t.append(JSON.stringify(e.value)),t}function d(s,e){switch(e.type){case"Nil":return c("nil","nil");case"BoolFalse":return c("bool","false");case"BoolTrue":return c("bool","true");case"Number":return c("number",e.value.toString());case"String":return c("string",e.value);case"ExistingGCObject":return c("existing",`Ref [${e.id}]`,`${s}_gc_${e.id}`);case"Table":case"TableWithMeta":return b(s,e);case"LuaObject":return S(s,e)}}function E(s,e){let t=document.createElement("details"),a=document.createElement("summary"),n=document.createElement("span");return n.classList.add("modname"),n.append(s),a.append(n," = ",p(s,e)),t.append(a),t.append(d(s,e)),"id"in e&&(t.id=`${s}_gc_${e.id}`,t.classList.add("fetch")),t}window.addEventListener("click",s=>{let t=s.target.closest("details");if(t){let a=t.querySelector(".fetch");if(a&&a.parentElement===t){a.classList.remove("fetch"),t.classList.add("loading");let n=a.id.match(/^(.+)_gc_(.+)$/);n&&u("fetch",{modname:n[1],gcid:Number(n[2])})}}});window.addEventListener("message",async s=>{let{type:e,body:t}=s.data;switch(e){case"init":let a=t;l.version.innerText=a.version;let n=l.root;n.replaceChildren();for(let r in a.data)n.append(E(r,a.data[r]));break;case"values":let i=t;L(i.modname,i.gcid,i.values);break}});u("ready",{});
//# sourceMappingURL=ScriptDatWebview.js.map
